<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHPBoy - Game Boy Color Emulator in Your Browser</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéÆ PHPBoy</h1>
            <p class="subtitle">Game Boy Color Emulator ¬∑ Powered by PHP & WebAssembly</p>
        </header>

        <main>
            <!-- ROM Loader Section -->
            <section class="rom-loader" id="rom-loader-section">
                <div class="loader-card">
                    <h2>Load a ROM</h2>
                    <p>Select a Game Boy or Game Boy Color ROM file (.gb or .gbc)</p>

                    <div class="file-input-wrapper">
                        <input type="file" id="rom-file" accept=".gb,.gbc" />
                        <label for="rom-file" class="file-label">
                            <span class="file-icon">üìÅ</span>
                            <span class="file-text">Choose ROM File</span>
                        </label>
                    </div>

                    <div class="rom-info" id="rom-info" style="display: none;">
                        <strong>Loaded:</strong> <span id="rom-name"></span>
                        <br>
                        <strong>Size:</strong> <span id="rom-size"></span>
                    </div>
                </div>
            </section>

            <!-- Emulator Section -->
            <section class="emulator" id="emulator-section" style="display: none;">
                <!-- Canvas -->
                <div class="screen-container">
                    <canvas id="screen" width="640" height="576"></canvas>
                    <div class="screen-overlay" id="screen-overlay">
                        <div class="overlay-message">PAUSED</div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="controls">
                    <div class="control-group">
                        <button id="btn-play" class="btn btn-primary">
                            <span class="btn-icon">‚ñ∂</span> Play
                        </button>
                        <button id="btn-pause" class="btn btn-secondary" disabled>
                            <span class="btn-icon">‚è∏</span> Pause
                        </button>
                        <button id="btn-reset" class="btn btn-secondary">
                            <span class="btn-icon">üîÑ</span> Reset
                        </button>
                        <button id="btn-load-new" class="btn btn-secondary">
                            <span class="btn-icon">üìÅ</span> Load New ROM
                        </button>
                    </div>

                    <div class="control-group">
                        <label for="speed-control">
                            Speed: <span id="speed-value">1.0x</span>
                        </label>
                        <input type="range" id="speed-control" min="0.25" max="4" step="0.25" value="1" />
                    </div>

                    <div class="control-group">
                        <label for="volume-control">
                            Volume: <span id="volume-value">100%</span>
                        </label>
                        <input type="range" id="volume-control" min="0" max="100" step="5" value="100" />
                    </div>

                    <div class="control-group stats">
                        <div class="stat">
                            <strong>FPS:</strong> <span id="fps-display">0</span>
                        </div>
                        <div class="stat">
                            <strong>Status:</strong> <span id="status-display">Idle</span>
                        </div>
                    </div>
                </div>

                <!-- Keyboard Layout -->
                <div class="keyboard-help">
                    <h3>Keyboard Controls</h3>
                    <div class="key-grid">
                        <div class="key-mapping">
                            <span class="key">‚Üë ‚Üì ‚Üê ‚Üí</span>
                            <span class="arrow">‚Üí</span>
                            <span class="button">D-Pad</span>
                        </div>
                        <div class="key-mapping">
                            <span class="key">Z</span>
                            <span class="arrow">‚Üí</span>
                            <span class="button">A Button</span>
                        </div>
                        <div class="key-mapping">
                            <span class="key">X</span>
                            <span class="arrow">‚Üí</span>
                            <span class="button">B Button</span>
                        </div>
                        <div class="key-mapping">
                            <span class="key">Enter</span>
                            <span class="arrow">‚Üí</span>
                            <span class="button">Start</span>
                        </div>
                        <div class="key-mapping">
                            <span class="key">Shift</span>
                            <span class="arrow">‚Üí</span>
                            <span class="button">Select</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loading Indicator -->
            <div class="loading" id="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <p id="loading-message">Initializing PHP WASM...</p>
            </div>

            <!-- Error Display -->
            <div class="error" id="error-display" style="display: none;">
                <h3>Error</h3>
                <pre id="error-message"></pre>
                <button class="btn btn-secondary" onclick="location.reload()">Reload Page</button>
            </div>
        </main>

        <footer>
            <p>
                PHPBoy is an open-source Game Boy Color emulator written in PHP 8.3+
                <br>
                <a href="https://github.com/eddmann/phpboy" target="_blank">View on GitHub</a>
                ¬∑
                <a href="#" id="about-link">About</a>
            </p>
            <p class="disclaimer">
                Game Boy and Game Boy Color are trademarks of Nintendo.
                <br>
                This emulator is for educational purposes. You must own the games you play.
            </p>
        </footer>
    </div>

    <!-- About Modal -->
    <div class="modal" id="about-modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" id="modal-close">&times;</span>
            <h2>About PHPBoy</h2>
            <p>
                <strong>PHPBoy</strong> is a Game Boy Color emulator written entirely in PHP 8.3+
                and compiled to WebAssembly for browser execution.
            </p>
            <p>
                <strong>Features:</strong>
            </p>
            <ul>
                <li>Full CPU emulation (LR35902 / Sharp SM83)</li>
                <li>PPU with background, window, and sprite rendering</li>
                <li>APU with 4 audio channels</li>
                <li>MBC1, MBC3, MBC5 cartridge support</li>
                <li>Game Boy Color enhancements</li>
                <li>100% Blargg test suite pass rate</li>
            </ul>
            <p>
                <strong>Technology Stack:</strong>
            </p>
            <ul>
                <li>PHP 8.3+ (compiled to WebAssembly via Emscripten)</li>
                <li>Canvas API for graphics rendering</li>
                <li>Web Audio API for sound</li>
                <li>Keyboard API for input</li>
            </ul>
            <p>
                <strong>Performance:</strong> Runs at full speed (60 FPS) in modern browsers.
            </p>
            <p>
                <a href="https://github.com/eddmann/phpboy" target="_blank">View Source Code on GitHub</a>
            </p>
        </div>
    </div>

    <!-- Scripts -->
    <!-- php-wasm will be loaded here (from CDN or local build) -->
    <script src="php-wasm.js"></script>
    <script src="js/phpboy.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
